<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>How to Add  Captions to your Videos</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">How to Add  Captions to your Videos</h1>
</header>
<section data-field="subtitle" class="p-summary">
Videos are a compelling way to share experiences with your customers. The combination of speech, sounds, images and movement allow us to…
</section>
<section data-field="body" class="e-content">
<section name="24b9" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="112c" id="112c" class="graf graf--h3 graf--leading graf--title">How to Add Captions to your Videos</h3><figure name="2e3d" id="2e3d" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 390px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 55.7%;"></div><img class="graf-image" data-image-id="1*rvPreCBsGA-po5W6JOZGuw.png" data-width="731" data-height="407" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*rvPreCBsGA-po5W6JOZGuw.png"></div></figure><p name="0115" id="0115" class="graf graf--p graf-after--figure">Videos are a compelling way to share experiences with your customers. The combination of speech, sounds, images and movement allow us to share a more enriching experience.</p><p name="f2bb" id="f2bb" class="graf graf--p graf-after--p">However, on the web a video can only be autoplayed when it is muted. As a consumer with small children, this is often a blessing: the last thing I want is a website to wake up a sleeping baby. But as a developer, I want everyone to experience everything my videos have to offer, so I want to work around this issue (but of course, while still letting everyone’s babies nap!)</p><p name="98f1" id="98f1" class="graf graf--p graf-after--p">One solution is to add captions. Users can still engage with your video and follow along with the dialogue. Facebook finds that <a href="https://instapage.com/blog/closed-captioning-mute-videos" data-href="https://instapage.com/blog/closed-captioning-mute-videos" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">videos with captions are watched 12% </a>longer than videos without captions (85% of Facebook videos are watched without audio). Longer video watch time increases <a href="https://www.3playmedia.com/2018/12/10/7-ways-video-transcripts-captions-improve-seo/" data-href="https://www.3playmedia.com/2018/12/10/7-ways-video-transcripts-captions-improve-seo/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">your search rank</a>, and the presence of a captions file even improves your site SEO! With all of these advantages, the accessibility improvements of your website almost come as an afterthought.</p><p name="afe8" id="afe8" class="graf graf--p graf-after--p">No matter the reason you choose to add captions to your videos — you are probably wondering how it is done!</p><h3 name="cffb" id="cffb" class="graf graf--h3 graf-after--p">The VTT File</h3><p name="3255" id="3255" class="graf graf--p graf-after--h3">Closed captioning is typically done with a VTT (Video Text Track) file. They=se are text files that simply list the text that should appear over a specified period:</p><blockquote name="97ac" id="97ac" class="graf graf--blockquote graf-after--p">WEBVTT</blockquote><blockquote name="a30e" id="a30e" class="graf graf--blockquote graf-after--blockquote">1</blockquote><blockquote name="8e1b" id="8e1b" class="graf graf--blockquote graf-after--blockquote">00:00:15.000 → 00:00:17.951</blockquote><blockquote name="50a8" id="50a8" class="graf graf--blockquote graf-after--blockquote">At the left we can see…</blockquote><blockquote name="09e7" id="09e7" class="graf graf--blockquote graf-after--blockquote">2</blockquote><blockquote name="78d9" id="78d9" class="graf graf--blockquote graf-after--blockquote">00:00:18.166 → 00:00:20.083</blockquote><blockquote name="e4bb" id="e4bb" class="graf graf--blockquote graf-after--blockquote">At the right we can see the…</blockquote><p name="1793" id="1793" class="graf graf--p graf-after--blockquote">In the example above, from 15–17.9 seconds, the text “At the left we can see” will appear on the screen, followed a split second later by “at the right we can see.” It is really a pretty straightforward format. But other than manually transcribing your video, how can you create a VTT file?</p><p name="0c64" id="0c64" class="graf graf--p graf-after--p">Let’s walk through 2 ways:</p><h3 name="3443" id="3443" class="graf graf--h3 graf-after--p">VTT Creator</h3><p name="fde6" id="fde6" class="graf graf--p graf-after--h3"><a href="https://www.vtt-creator.com/" data-href="https://www.vtt-creator.com/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">VTT Creator</a> is a web based tool. You simply upload your video, and as it plays the video back, it creates captions for you.</p><figure name="0aa2" id="0aa2" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 349px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 49.9%;"></div><img class="graf-image" data-image-id="0*0EV4F_2lV2epjlaB" data-width="1079" data-height="538" src="https://cdn-images-1.medium.com/max/800/0*0EV4F_2lV2epjlaB"></div></figure><p name="4632" id="4632" class="graf graf--p graf-after--figure">The website uploads your video and begins the analysis, and the pane on the left fills with the subtitles</p><figure name="bafd" id="bafd" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 393px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.10000000000001%;"></div><img class="graf-image" data-image-id="0*XTOA3ZQoSjDk3InB" data-width="1011" data-height="567" src="https://cdn-images-1.medium.com/max/800/0*XTOA3ZQoSjDk3InB"></div></figure><p name="f627" id="f627" class="graf graf--p graf-after--figure">You can download the VTT, and you’re good to go!</p><h3 name="1e98" id="1e98" class="graf graf--h3 graf-after--p">Google Speech to Text</h3><p name="a504" id="a504" class="graf graf--p graf-after--h3">Google Cloud, Azure and AWS all have a speech to text tool. I chose Google’s for this demo, but they all operate in much the same way.</p><p name="6fbf" id="6fbf" class="graf graf--p graf-after--p">Google has a helpful <a href="https://cloud.google.com/speech-to-text/docs/quickstart-client-libraries#client-libraries-install-nodejs" data-href="https://cloud.google.com/speech-to-text/docs/quickstart-client-libraries#client-libraries-install-nodejs" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">QuickStart</a> guide to set up your Google Cloud account for Speech to Text. The first step is to use ffmpeg to strip the audio track (there is no need to upload the video track when doing audio analysis).</p><p name="5bdd" id="5bdd" class="graf graf--p graf-after--p">I used their Node.js code example with a few changes (Code available on <a href="https://github.com/dougsillars/subtitles" data-href="https://github.com/dougsillars/subtitles" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">GitHub</a>). The video I was transcribing was over 1 minute long, so I had to host it on a Google Cloud instance. Rather than using:</p><blockquote name="0b42" id="0b42" class="graf graf--blockquote graf-after--p">// The name of the audio file to transcribe</blockquote><blockquote name="4c7e" id="4c7e" class="graf graf--blockquote graf-after--blockquote">const fileName = ‘./resources/audio.raw’;</blockquote><blockquote name="9cc6" id="9cc6" class="graf graf--blockquote graf-after--blockquote">// The audio file’s encoding, sample rate in hertz, and BCP-47 language code</blockquote><blockquote name="9d9f" id="9d9f" class="graf graf--blockquote graf-after--blockquote">const audio = {</blockquote><blockquote name="0470" id="0470" class="graf graf--blockquote graf-after--blockquote">content: audioBytes,</blockquote><blockquote name="fa88" id="fa88" class="graf graf--blockquote graf-after--blockquote">};</blockquote><blockquote name="f29e" id="f29e" class="graf graf--blockquote graf-after--blockquote">…</blockquote><blockquote name="7da6" id="7da6" class="graf graf--blockquote graf-after--blockquote">const request = {</blockquote><blockquote name="c76f" id="c76f" class="graf graf--blockquote graf-after--blockquote">audio: audio,</blockquote><blockquote name="e9b4" id="e9b4" class="graf graf--blockquote graf-after--blockquote">config: config,</blockquote><blockquote name="5f20" id="5f20" class="graf graf--blockquote graf-after--blockquote">};</blockquote><p name="7982" id="7982" class="graf graf--p graf-after--blockquote">I used:</p><blockquote name="3ef3" id="3ef3" class="graf graf--blockquote graf-after--p">const gcsUri = ‘gs://video-text-files/sample.mp3’;</blockquote><blockquote name="69b1" id="69b1" class="graf graf--blockquote graf-after--blockquote">const audio = {</blockquote><blockquote name="e705" id="e705" class="graf graf--blockquote graf-after--blockquote">uri: gcsUri,</blockquote><blockquote name="c3dc" id="c3dc" class="graf graf--blockquote graf-after--blockquote">};</blockquote><p name="d25f" id="d25f" class="graf graf--p graf-after--blockquote">There is no need to transcode the video to base64 (as described in the tutorial) if it is hosted on Google Cloud. The sample code from Google writes the transcript into the console:</p><figure name="690e" id="690e" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 239px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 34.1%;"></div><img class="graf-image" data-image-id="0*PHDqyWCU_PCA4nR8" data-width="1074" data-height="366" src="https://cdn-images-1.medium.com/max/800/0*PHDqyWCU_PCA4nR8"></div></figure><p name="2c3d" id="2c3d" class="graf graf--p graf-after--figure">This is super cool, but we want more than a transcription — we need those time stamps. The raw JSON file has an entry for each word with the start and end time for each word:</p><figure name="169a" id="169a" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 275px; max-height: 347px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 126.2%;"></div><img class="graf-image" data-image-id="0*jxIPZw0Mr2CFOVLA" data-width="275" data-height="347" src="https://cdn-images-1.medium.com/max/800/0*jxIPZw0Mr2CFOVLA"></div></figure><p name="0029" id="0029" class="graf graf--p graf-after--figure">So I created a function that groups words, using the first word’s start time,and the end time of the last word. The length of the phrase can be varied — in the sample code it is set to 10 words. The script outputs a VTT file to the console.</p><h3 name="eb00" id="eb00" class="graf graf--h3 graf-after--p">Adding Captions to your Video</h3><h3 name="05f7" id="05f7" class="graf graf--h3 graf-after--h3">HTML5</h3><p name="0b01" id="0b01" class="graf graf--p graf-after--h3">Adding the VTT file to your video is easy. If you are using HTML5 video, you can add a track attribute pointing to the VTT file.</p><blockquote name="16b0" id="16b0" class="graf graf--blockquote graf-after--p">&lt;video autoplay muted controls&gt;</blockquote><blockquote name="ad3f" id="ad3f" class="graf graf--blockquote graf-after--blockquote">&lt;source src=”myvideo.webm”&gt;</blockquote><blockquote name="1dc1" id="1dc1" class="graf graf--blockquote graf-after--blockquote">&lt;source src=”myvideo.mp4&quot;&gt;</blockquote><blockquote name="544b" id="544b" class="graf graf--blockquote graf-after--blockquote">&lt;track default lang=”en” kind=”captions” src=”myvideo.vtt”&gt;</blockquote><blockquote name="f68f" id="f68f" class="graf graf--blockquote graf-after--blockquote">&lt;track lang=”es” kind=”captions” src=”muvideo-es.vtt”&gt;</blockquote><blockquote name="f73f" id="f73f" class="graf graf--blockquote graf-after--blockquote">&lt;/video&gt;</blockquote><h3 name="dc2c" id="dc2c" class="graf graf--h3 graf-after--blockquote">Video Streaming</h3><p name="de33" id="de33" class="graf graf--p graf-after--h3">If you want to add captions to your <a href="https://api.video" data-href="https://api.video" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">api.video</a> video, you can use the Captions API.</p><ol class="postList"><li name="106b" id="106b" class="graf graf--li graf-after--p">First you must <a href="https://docs.api.video/5.1/videos-and-streaming/Authentication-tutorial" data-href="https://docs.api.video/5.1/videos-and-streaming/Authentication-tutorial" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">authenticate</a> your session to gain an access token.</li><li name="1a08" id="1a08" class="graf graf--li graf-after--li">Determine the videoID of the video you’d like to add the caption to. In this example, I have created captions to <a href="https://orange.blender.org/" data-href="https://orange.blender.org/" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">Elephant’s Dream</a> (an Open Source video project). The video ID is: vi5UNyaStzuuj0xTAGp7qtjf</li></ol><div name="8a4b" id="8a4b" class="graf graf--mixtapeEmbed graf-after--li"><a href="https://embed.api.video/vod/vi5UNyaStzuuj0xTAGp7qtjf" data-href="https://embed.api.video/vod/vi5UNyaStzuuj0xTAGp7qtjf" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://embed.api.video/vod/vi5UNyaStzuuj0xTAGp7qtjf"><strong class="markup--strong markup--mixtapeEmbed-strong">api.video</strong><br><em class="markup--em markup--mixtapeEmbed-em">Video Player by api.video</em>embed.api.video</a><a href="https://embed.api.video/vod/vi5UNyaStzuuj0xTAGp7qtjf" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="28c86ed31b23c48319a2350394566edb"></a></div><p name="9f54" id="9f54" class="graf graf--p graf-after--mixtapeEmbed">3. Make a call to add the caption. Using curl, the request looks like:</p><blockquote name="703c" id="703c" class="graf graf--blockquote graf-after--p">curl <a href="https://ws.api.video/videos/vi5UNyaStzuuj0xTAGp7qtjf/captions/en-US" data-href="https://ws.api.video/videos/vi5UNyaStzuuj0xTAGp7qtjf/captions/en-US" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank">https://ws.api.video/videos/vi5UNyaStzuuj0xTAGp7qtjf/captions/en-US</a> -H ‘Authorization: Bearer {access_token}’ -F file=@/path/to/google.vtt</blockquote><p name="0dbb" id="0dbb" class="graf graf--p graf-after--blockquote">And we receive a response:</p><blockquote name="064b" id="064b" class="graf graf--blockquote graf-after--p">{“uri”:”/videos/vi5UNyaStzuuj0xTAGp7qtjf/captions/en”,”src”:”https://cdn.api.video/vod/vi5UNyaStzuuj0xTAGp7qtjf/captions/en.vtt&quot;,&quot;srclang&quot;:&quot;en&quot;,&quot;default&quot;:false}</blockquote><p name="14b2" id="14b2" class="graf graf--p graf-after--blockquote">Note that captions are off by default. This is easily resolved by patching the video, setting the default to true. Using curl, this looks like:</p><blockquote name="2db2" id="2db2" class="graf graf--blockquote graf-after--p">curl -X PATCH <a href="https://ws.api.video/videos/vi5UNyaStzuuj0xTAGp7qtjf/captions/e" data-href="https://ws.api.video/videos/vi5UNyaStzuuj0xTAGp7qtjf/captions/e" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank">https://ws.api.video/videos/vi5UNyaStzuuj0xTAGp7qtjf/captions/en</a> -H ‘Authorization: Bearer {access_token}’ -d ‘{“default”: true}’</blockquote><p name="f5b2" id="f5b2" class="graf graf--p graf-after--blockquote">And we receive a response:</p><blockquote name="9fe6" id="9fe6" class="graf graf--blockquote graf-after--p">{“uri”:”/videos/vi5UNyaStzuuj0xTAGp7qtjf/captions/en”,”src”:”https://cdn.api.video/vod/vi5UNyaStzuuj0xTAGp7qtjf/captions/en.vtt&quot;,&quot;srclang&quot;:&quot;en&quot;,&quot;default&quot;:true}</blockquote><p name="a1c4" id="a1c4" class="graf graf--p graf-after--blockquote">And watching the movie: success! the captions are turned on by default. To autoplay a video with api.video, simply add #autoplay to the end of the url, and we have an autoplaying video with captions.</p><p name="f6dd" id="f6dd" class="graf graf--p graf-after--p">Now we can rest assured that our videos will likely have more traction, be watched longer, and shared more often. And, we are making our content more accessible to users who cannot hear.</p><h3 name="d0b2" id="d0b2" class="graf graf--h3 graf-after--p">Conclusion</h3><p name="4707" id="4707" class="graf graf--p graf-after--h3">Video captions not only make your content accessible, but research shows videos with captions are watched longer, and shared more often. And searchable transcriptions actually increase the SEO of your site!</p><p name="8507" id="8507" class="graf graf--p graf-after--p">Often there is reluctance to add captions due to the added work, but with just a few clicks of a button, captions can be generated automatically and uploaded for immediate playback.</p><p name="4675" id="4675" class="graf graf--p graf-after--p graf--trailing">Give it a try, and share your caption successes in the <a href="https://community.api.video/" data-href="https://community.api.video/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">api.video community</a></p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@api.video" class="p-author h-card">api.video</a> on <a href="https://medium.com/p/19eba225a4f8"><time class="dt-published" datetime="2020-03-06T22:25:35.689Z">March 6, 2020</time></a>.</p><p><a href="https://medium.com/@api.video/how-to-add-captions-to-your-videos-19eba225a4f8" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on March 19, 2020.</p></footer></article></body></html>